var enableInlineVideo=function(){"use strict";function e(e){return function(e,n,i,r){function t(i){a=n(t,r),e(i-(d||i)),d=i}var a,d;return{start:function(){a||t(0)},stop:function(){i(a),a=null,d=0}}}(e,requestAnimationFrame,cancelAnimationFrame)}function n(e,n,i){function r(r){i&&!i(e,n)||r.stopImmediatePropagation()}return e.addEventListener(n,r),r}function i(e,n,i,r){function t(e){i[n]=e}r&&t(e[n]),Object.defineProperty(e,n,{get:function(){return i[n]},set:t})}function r(e,n,i){i.addEventListener(n,(function(){return e.dispatchEvent(new Event(n))}))}function t(e,n){Promise.resolve().then((function(){e.dispatchEvent(new Event(n))}))}function a(e,n,i){(l||0)+200<Date.now()&&(e[m]=!0,l=Date.now()),i||(e.currentTime=n),b[++E%3]=100*n|0}function d(e){return e.driver.currentTime>=e.video.duration}function u(e){var n=this;n.video.readyState>=n.video.HAVE_FUTURE_DATA?(n.hasAudio||(n.driver.currentTime=n.video.currentTime+e*n.video.playbackRate/1e3,n.video.loop&&d(n)&&(n.driver.currentTime=0)),a(n.video,n.driver.currentTime)):n.video.networkState===n.video.NETWORK_IDLE&&0===n.video.buffered.length&&n.video.load(),n.video.ended&&(delete n.video[m],n.video.pause(!0))}function o(){var e=this,n=e[y];e.webkitDisplayingFullscreen?e[g]():("data:"!==n.driver.src&&n.driver.src!==e.src&&(a(e,0,!0),n.driver.src=e.src),e.paused&&(n.paused=!1,0===e.buffered.length&&e.load(),n.driver.play(),n.updater.start(),n.hasAudio||(t(e,"play"),n.video.readyState>=n.video.HAVE_ENOUGH_DATA&&t(e,"playing"))))}function s(e){var n=this,i=n[y];i.driver.pause(),i.updater.stop(),n.webkitDisplayingFullscreen&&n[h](),i.paused&&!e||(i.paused=!0,i.hasAudio||t(n,"pause"),n.ended&&!n.webkitDisplayingFullscreen&&(n[m]=!0,t(n,"ended")))}function c(n,i){var o={};n[y]=o,o.paused=!0,o.hasAudio=i,o.video=n,o.updater=e(u.bind(o)),i?o.driver=function(e){var n=new Audio;return r(e,"play",n),r(e,"playing",n),r(e,"pause",n),n.crossOrigin=e.crossOrigin,n.src=e.src||e.currentSrc||"data:",n}(n):(n.addEventListener("canplay",(function(){n.paused||t(n,"playing")})),o.driver={src:n.src||n.currentSrc||"data:",muted:!0,paused:!0,pause:function(){o.driver.paused=!0},play:function(){o.driver.paused=!1,d(o)&&a(n,0)},get ended(){return d(o)}}),n.addEventListener("emptied",(function(){var e=!o.driver.src||"data:"===o.driver.src;o.driver.src&&o.driver.src!==n.src&&(a(n,0,!0),o.driver.src=n.src,e||!i&&n.autoplay?o.driver.play():o.updater.stop())}),!1),n.addEventListener("webkitbeginfullscreen",(function(){n.paused?i&&0===o.driver.buffered.length&&o.driver.load():(n.pause(),n[g]())})),i&&(n.addEventListener("webkitendfullscreen",(function(){o.driver.currentTime=n.currentTime})),n.addEventListener("seeking",(function(){b.indexOf(100*n.currentTime|0)<0&&(o.driver.currentTime=n.currentTime)})))}function v(e){var n=e[m];return delete e[m],!e.webkitDisplayingFullscreen&&!n}function p(e){var r=e[y];e[g]=e.play,e[h]=e.pause,e.play=o,e.pause=s,i(e,"paused",r.driver),i(e,"muted",r.driver,!0),i(e,"playbackRate",r.driver,!0),i(e,"ended",r.driver),i(e,"loop",r.driver,!0),n(e,"seeking",(function(e){return!e.webkitDisplayingFullscreen})),n(e,"seeked",(function(e){return!e.webkitDisplayingFullscreen})),n(e,"timeupdate",v),n(e,"ended",v)}var l,f="object"==typeof document&&"object-fit"in document.head.style&&!matchMedia("(-webkit-video-playable-inline)").matches,y="fregante:iphone-inline-video",m="fregante:iphone-inline-video:event",g="fregante:iphone-inline-video:nativeplay",h="fregante:iphone-inline-video:nativepause",b=[],E=0;return function(e,n){if(void 0===n&&(n={}),!e[y]){if(!n.everywhere){if(!f)return;if(!(n.iPad||n.ipad?/iPhone|iPod|iPad/:/iPhone|iPod/).test(navigator.userAgent))return}e.pause();var i=e.autoplay;e.autoplay=!1,c(e,!e.muted),p(e),e.classList.add("IIV"),e.muted&&i&&(e.play(),e.addEventListener("playing",(function n(){e.autoplay=!0,e.removeEventListener("playing",n)}))),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments")}}}();